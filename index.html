<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ì˜ê¸° ìœ¡ì•„ ê²Œì„</title>
  <style>
    :root{--bg:#f7fbff;--card:#ffffff;--accent:#ff6b6b;--muted:#6b7280}
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Noto Sans KR', 'Apple SD Gothic Neo', sans-serif;margin:0;background:linear-gradient(180deg,#e8f0ff,#fdfefe);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
    .game{width:100%;max-width:920px;background:var(--card);border-radius:16px;box-shadow:0 10px 30px rgba(17,24,39,0.08);overflow:hidden;display:grid;grid-template-columns:1fr 360px}
    .left{padding:28px;display:flex;flex-direction:column;gap:18px}
    .title{display:flex;align-items:center;gap:12px}
    .title h1{font-size:20px;margin:0}
    .baby-wrap{background:linear-gradient(180deg,#fff,#fffbf0);border-radius:12px;padding:20px;display:flex;flex-direction:column;align-items:center;gap:12px}
    .baby{font-size:96px;filter:drop-shadow(0 6px 18px rgba(0,0,0,0.08));transition:transform .15s ease}
    .baby.happy{transform:translateY(-6px) scale(1.05)}
    .meters{display:flex;gap:10px;width:100%}
    .meter{flex:1;background:#f3f4f6;border-radius:999px;padding:6px}
    .meter-inner{height:12px;border-radius:999px;background:linear-gradient(90deg,#60a5fa,#34d399);width:50%}
    .meter-label{font-size:12px;color:var(--muted);margin-top:6px}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    button{flex:1;padding:10px;border-radius:10px;border:0;background:var(--accent);color:#fff;font-weight:600;cursor:pointer;box-shadow:0 6px 14px rgba(255,107,107,0.18)}
    button.secondary{background:#10b981}
    button.tertiary{background:#60a5fa}
    button:active{transform:translateY(1px)}
    .right{background:linear-gradient(180deg,#f8fafc,#ffffff);padding:20px;border-left:1px solid rgba(15,23,42,0.02);display:flex;flex-direction:column;gap:12px}
    .panel{background:rgba(255,255,255,0.6);padding:12px;border-radius:10px;border:1px solid rgba(15,23,42,0.03)}
    .log{height:240px;overflow:auto;font-size:13px;color:var(--muted);padding:8px}
    .big{font-size:14px;font-weight:700}
    .small{font-size:12px;color:var(--muted)}
    .footer{display:flex;gap:8px;justify-content:space-between;align-items:center}
    .reset{background:transparent;border:1px dashed #e5e7eb;color:#111;padding:8px;border-radius:8px;cursor:pointer}
    @media(max-width:880px){.game{grid-template-columns:1fr}.right{order:2}}
  </style>
</head>
<body>
  <div class="game" role="application" aria-label="ì˜ê¸° ìœ¡ì•„ ê²Œì„">
    <div class="left">
      <div class="title"><div style="font-size:28px">ğŸ‘¶</div><h1>ì˜ê¸° ìœ¡ì•„ ê²Œì„</h1></div>

      <div class="baby-wrap panel">
        <div id="baby" class="baby" aria-live="polite">ğŸ¼</div>
        <div class="info" style="width:100%;text-align:center">
          <div class="big" id="age">ë‚˜ì´: 0ì¼</div>
          <div class="small">ìƒíƒœë¥¼ ê´€ë¦¬í•´ì„œ ì˜ê¸°ë¥¼ ê±´ê°•í•˜ê²Œ í‚¤ìš°ì„¸ìš”.</div>
        </div>

        <div class="meters" style="margin-top:12px">
          <div style="flex:1">
            <div class="meter" aria-hidden="true"><div id="hungerBar" class="meter-inner" style="width:80%"></div></div>
            <div class="meter-label">ë°°ê³ í”” <span id="hungerVal">80</span>%</div>
          </div>
          <div style="flex:1">
            <div class="meter" aria-hidden="true"><div id="hygieneBar" class="meter-inner" style="width:90%"></div></div>
            <div class="meter-label">ì²­ê²° <span id="hygieneVal">90</span>%</div>
          </div>
          <div style="flex:1">
            <div class="meter" aria-hidden="true"><div id="moodBar" class="meter-inner" style="width:85%"></div></div>
            <div class="meter-label">ê¸°ë¶„ <span id="moodVal">85</span>%</div>
          </div>
        </div>

        <div class="controls" style="margin-top:12px">
          <button id="feedBtn">ë¨¹ì´ê¸°</button>
          <button id="playBtn" class="secondary">ë†€ì•„ì£¼ê¸°</button>
          <button id="cleanBtn" class="tertiary">ëª©ìš•ì‹œí‚¤ê¸°</button>
          <button id="sleepBtn" style="flex-basis:100%">ì¬ìš°ê¸°</button>
        </div>
      </div>

      <div class="panel" style="padding:12px">
        <div class="small">ìë™ ìƒíƒœ ê°ì†Œ: ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ë°°ê³ í””, ì²­ê²°, ê¸°ë¶„ì´ ì¤„ì–´ë“­ë‹ˆë‹¤. ì˜ ëŒë´ì£¼ì„¸ìš”!</div>
      </div>
    </div>

    <div class="right">
      <div class="panel">
        <div class="big">ê¸°ë¡</div>
        <div class="log" id="log"></div>
      </div>

      <div class="panel">
        <div class="big">ì„¸ë¶€ì •ë³´</div>
        <div class="small">ìˆ˜ëª…: <span id="daysLived">0</span>ì¼</div>
        <div class="small">ì €ì¥: ìë™ìœ¼ë¡œ ë¡œì»¬ì— ì €ì¥ë©ë‹ˆë‹¤.</div>
      </div>

      <div class="footer">
        <button id="resetBtn" class="reset">ì²˜ìŒë¶€í„°</button>
        <div class="small">ë²„ì „ 1.0</div>
      </div>
    </div>
  </div>

  <script>
    // ê°„ë‹¨í•œ ì˜ê¸° ìœ¡ì•„ ê²Œì„ ë¡œì§
    const state = {
      hunger: 80, // 0-100 (ë†’ì„ìˆ˜ë¡ ê±´ê°•í•¨)
      hygiene: 90,
      mood: 85,
      days: 0,
      alive: true
    };

    // ë¡œì»¬ ì €ì¥ í‚¤
    const SAVE_KEY = 'younggi_save_v1';

    // UI ìš”ì†Œë“¤
    const hungerBar = document.getElementById('hungerBar');
    const hygieneBar = document.getElementById('hygieneBar');
    const moodBar = document.getElementById('moodBar');
    const hungerVal = document.getElementById('hungerVal');
    const hygieneVal = document.getElementById('hygieneVal');
    const moodVal = document.getElementById('moodVal');
    const babyEl = document.getElementById('baby');
    const ageEl = document.getElementById('age');
    const logEl = document.getElementById('log');
    const daysEl = document.getElementById('daysLived');

    // ë²„íŠ¼ ì´ë²¤íŠ¸
    document.getElementById('feedBtn').addEventListener('click', ()=>actionFeed());
    document.getElementById('playBtn').addEventListener('click', ()=>actionPlay());
    document.getElementById('cleanBtn').addEventListener('click', ()=>actionClean());
    document.getElementById('sleepBtn').addEventListener('click', ()=>actionSleep());
    document.getElementById('resetBtn').addEventListener('click', resetGame);

    // ì´ˆê¸°í™”: ë¡œë“œ/ë Œë”
    load();
    render();

    // ì‹œê°„ íë¦„: ë§¤ 6ì´ˆë§ˆë‹¤ ìƒíƒœ ê°ì†Œ
    let tickCount = 0;
    const TICK_MS = 6000;
    const timer = setInterval(()=>{
      if(!state.alive) return clearInterval(timer);
      tick();
    }, TICK_MS);

    function tick(){
      // ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ì„œì„œíˆ ê°ì†Œ
      state.hunger = clamp(state.hunger - randRange(2,6));
      state.hygiene = clamp(state.hygiene - randRange(1,4));
      state.mood = clamp(state.mood - randRange(1,5));
      tickCount++;
      if(tickCount % 10 === 0){ // 10 ticksë§ˆë‹¤ í•˜ë£¨ë¡œ ê³„ì‚°
        state.days++;
        log(`í•˜ë£¨ê°€ ì§€ë‚¬ìŠµë‹ˆë‹¤. ì˜ê¸° ë‚˜ì´: ${state.days}ì¼`);
      }
      checkAlive();
      save();
      render();
    }

    function actionFeed(){
      if(!state.alive) return; 
      const gain = randRange(10,24);
      state.hunger = clamp(state.hunger + gain);
      state.mood = clamp(state.mood + randRange(1,6));
      log(`ë¨¹ì´ê¸°: ë°°ê³ í”” +${gain}`);
      animateHappy();
      save(); render();
    }

    function actionPlay(){
      if(!state.alive) return; 
      const gain = randRange(8,18);
      state.mood = clamp(state.mood + gain);
      state.hunger = clamp(state.hunger - randRange(4,8));
      log(`ë†€ì•„ì£¼ê¸°: ê¸°ë¶„ +${gain}, ë°°ê³ í”” -${randRange(4,8)}`);
      animateHappy();
      save(); render();
    }

    function actionClean(){
      if(!state.alive) return; 
      const gain = randRange(12,28);
      state.hygiene = clamp(state.hygiene + gain);
      state.mood = clamp(state.mood + randRange(2,6));
      log(`ëª©ìš•ì‹œí‚¤ê¸°: ì²­ê²° +${gain}`);
      save(); render();
    }

    function actionSleep(){
      if(!state.alive) return; 
      log('ì˜ê¸°ë¥¼ ì¬ì›ë‹ˆë‹¤... ì ê¹ ì‰¬ì–´ìš”');
      // ìˆ˜ë©´ ë™ì•ˆ ë¹ ë¥¸ íšŒë³µ (ë¹„ë™ê¸° ì‹œë®¬)
      disableControls(true);
      setTimeout(()=>{
        state.hunger = clamp(state.hunger - randRange(2,6));
        state.mood = clamp(state.mood + randRange(6,18));
        state.hygiene = clamp(state.hygiene - randRange(0,2));
        log('ì˜ê¸°ê°€ ê¸°ìš´ì„ ì°¨ë ¸ìŠµë‹ˆë‹¤!');
        disableControls(false);
        animateHappy();
        save(); render();
      },1500);
    }

    function animateHappy(){
      babyEl.classList.add('happy');
      babyEl.textContent = getBabyFace();
      setTimeout(()=>{babyEl.classList.remove('happy'); babyEl.textContent = 'ğŸ¼';},900);
    }

    function getBabyFace(){
      // ê°„ë‹¨ ê°ì •í‘œí˜„
      if(state.mood > 80) return 'ğŸ˜„';
      if(state.mood > 60) return 'ğŸ™‚';
      if(state.mood > 35) return 'ğŸ˜';
      return 'ğŸ˜¢';
    }

    function render(){
      hungerBar.style.width = state.hunger + '%';
      hygieneBar.style.width = state.hygiene + '%';
      moodBar.style.width = state.mood + '%';
      hungerVal.textContent = state.hunger;
      hygieneVal.textContent = state.hygiene;
      moodVal.textContent = state.mood;
      ageEl.textContent = `ë‚˜ì´: ${state.days}ì¼`;
      daysEl.textContent = state.days;
      babyEl.setAttribute('aria-label', `ì˜ê¸° ìƒíƒœ: ë°°ê³ í”” ${state.hunger}%, ì²­ê²° ${state.hygiene}%, ê¸°ë¶„ ${state.mood}%`);

      // ìƒ‰ìƒ ë³€ê²½ for low stats
      setBarColor(hungerBar, state.hunger);
      setBarColor(hygieneBar, state.hygiene);
      setBarColor(moodBar, state.mood);
    }

    function setBarColor(el, value){
      const inner = el;
      if(value > 70) inner.style.background = 'linear-gradient(90deg,#60a5fa,#34d399)';
      else if(value > 40) inner.style.background = 'linear-gradient(90deg,#f59e0b,#f97316)';
      else inner.style.background = 'linear-gradient(90deg,#ef4444,#f43f5e)';
    }

    function clamp(v){ return Math.max(0, Math.min(100, Math.round(v))); }
    function randRange(a,b){return Math.floor(Math.random()*(b-a+1))+a}

    function log(text){
      const t = new Date().toLocaleTimeString();
      const line = document.createElement('div');
      line.textContent = `[${t}] ${text}`;
      logEl.prepend(line);
      // limit lines
      while(logEl.childNodes.length > 100) logEl.removeChild(logEl.lastChild);
    }

    function checkAlive(){
      if(state.hunger <= 0 || state.hygiene <= 0 || state.mood <= 0){
        state.alive = false;
        log('ì˜ê¸°ê°€ ë„ˆë¬´ ìƒíƒœê°€ ì•ˆ ì¢‹ì•„ì¡ŒìŠµë‹ˆë‹¤... ê²Œì„ ì˜¤ë²„');
        babyEl.textContent = 'ğŸ’€';
        disableControls(true);
      }
    }

    function disableControls(flag){
      document.querySelectorAll('button').forEach(b=>b.disabled = flag);
      if(!state.alive) document.getElementById('resetBtn').disabled = false;
    }

    // ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
    function save(){
      try{ localStorage.setItem(SAVE_KEY, JSON.stringify(state)); }
      catch(e){ console.warn('ì €ì¥ ì‹¤íŒ¨', e); }
    }
    function load(){
      try{
        const raw = localStorage.getItem(SAVE_KEY);
        if(raw){
          const s = JSON.parse(raw);
          Object.assign(state, s);
          log('ì €ì¥ëœ ê²Œì„ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');
        } else {
          log('ìƒˆë¡œìš´ ì˜ê¸°ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.');
        }
      }catch(e){ console.warn('ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨', e); }
    }

    function resetGame(){
      if(!confirm('ì •ë§ ì²˜ìŒë¶€í„° ì‹œì‘í• ê¹Œìš”? í˜„ì¬ ì§„í–‰ì¤‘ì¸ ë°ì´í„°ëŠ” ì‚­ì œë©ë‹ˆë‹¤.')) return;
      localStorage.removeItem(SAVE_KEY);
      state.hunger = 80; state.hygiene = 90; state.mood = 85; state.days = 0; state.alive = true;
      log('ê²Œì„ì„ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤. ìƒˆë¡œ ì‹œì‘í•©ë‹ˆë‹¤.');
      disableControls(false);
      save(); render();
    }

    // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (ì ‘ê·¼ì„±)
    window.addEventListener('keydown', e=>{
      if(e.key === 'f') actionFeed();
      if(e.key === 'p') actionPlay();
      if(e.key === 'c') actionClean();
      if(e.key === 's') actionSleep();
    });

    // ì²« ë Œë” í›„ ì¤€ë¹„
    render();
  </script>
</body>
</html>
